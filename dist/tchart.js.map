{"version":3,"sources":["../tchart.js"],"names":["TChart","Math","max","min","generateId","random","toString","substr","addEventListeners","el","events","listener","opts","eventsList","split","i","length","addEventListener","style","obj","Object","entries","reduce","styleString","propName","propValue","replace","matches","toLowerCase","configure","val","config","assign","setData","data","Array","isArray","TypeError","rerender","render","bind","fullrerender","drawingFrame","x","y","width","height","yAxis","text","fontSize","fontFamily","grid","horizontalLines","lineWidth","switchMode","nightMode","isNightMode","getColor","name","colorsMap","night","day","prepareChartData","chartData","xData","minMaxXData","minY","maxY","columnData","yDatas","colors","names","columnIndex","columns","Error","columnName","columnType","types","includes","slice","minMax","yData","minMaxYData","push","minValX","maxValX","chartsContainer","document","getElementById","containerId","body","className","innerHTML","ChartHTMLComponent","create","bypassXPoints","canvas","callback","clientWidth","drawPlot","areaMetric","drawingFunc","points","compressionRatioX","compressionRatioY","lineIndex","visible","yIndex","Animation","frameHandler","start","context","duration","frame","timestamp","startAnimTime","progress","call","reqAnimId","requestAnimationFrame","onFinishedCallback","cancelAnimationFrame","easeOutExpo","t","b","c","d","pow","onFinished","toHumanValue","v","toFixed","parentElementsHierarchy","e","parents","parentElement","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","mozCancelAnimationFrame","background","XYAxisLabels","gridBottomBorder","gridLine","zoomOverlay","zoomCarriageTool","verticalInfoLine","pointsInfoBackground","pointsInfoTitle","legendItemBorder","legendItemName","MONTH_NAMES","HTMLComponent","CREATED","_id","_events","parent","event","handler","once","values","EVENTS","where","whenCreate","html","_wrap","on","_postCreate","insertAdjacentHTML","remove","newData","_raiseEvent","whenRendered","created","whenCreated","Promise","then","eventName","forEach","template","NAME","CanvasHTMLComponent","ctx2d","clearRect","resolve","setTimeout","clientHeight","dpr","devicePixelRatio","canvasRect","getBoundingClientRect","getContext","scale","XAxisLayerCanvasHTMLComponent","clear","_renderXAxisDates","font","fillStyle","textBaseline","labelOccupiedWidth","date","Date","label","getMonth","getDate","labelWidth","measureText","labelMidWidth","labelX","labelXEnd","fillText","YAxisLayerCanvasHTMLComponent","_prevMaxY","_anim","_frameAnimHandler","increase","layer","anim","ctx","stepValY","stepHrzLine","maxShift","initY","animY","beginPath","strokeStyle","moveTo","lineTo","stroke","_renderXYAxisLabels","PointsInfoHTMLComponent","_values","weekDay","DAY_NAMES","getDay","month","map","yVal","lineName","color","join","backgroundColor","onMouseOut","left","right","top","InfoLayerCanvasHTMLComponent","_chartData","_pointsInfo","_mouseMoveHandler","_mouseOutHandler","stopPropagation","relatedTarget","currXPos","PI","leftPointMidDist","rightPointMidDist","_firstPoint","addVal","setPosition","arc","fill","_showInfo","layerX","PlotLayerCanvasHTMLComponent","renderedChartData","animate","yr","prevY","ZoomCarriageHTMLComponent","_currVisibilityFrame","_moveIsActive","_startStretchXPos","_initProps","_leftStretch","_rightStretch","_leftStretchIsActive","_rightStretchIsActive","borderTopColor","borderBottomColor","getElementsByClassName","_windowMouseMoveHandler","_windowMouseUpHandler","_mouseDownHandler","_stretchMouseDownHandler","whenVisibilityChanged","visibilityFrame","parseFloat","screenX","TouchEvent","changedTouches","dist","_move","_moveLeftStretch","_moveRightStretch","touches","getRightShift","target","offsetLeft","newRight","_setProps","newWidth","from","to","ZoomPlotCanvasHTMLComponent","ZoomHTMLComponent","_plot","_overlay","_zoomCarriage","_whenVisibilityChanged","_renderOverlay","fillRect","zoomCarriageRightShift","LegendItemHTMLComponent","_lineIndex","_visible","styleObj","borderColor","maskImage","webkitMaskImage","whenStateChanged","LegendHTMLComponent","_lines","legendItem","whenLegendItemStateChanged","_yAxisLayer","_xAxisLayer","_plotLayer","_infoLayer","_zoom","_legend","currVisibilityFrame","visibilityChangedTimer","lastVisibleChartData","_render","clearTimeout","zoom","addLine","visibleData","pointsYLen","recalculateMinMaxY","xl","visibleXData","minMaxValX","visibleChartData","mm"],"mappings":"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","sourcesContent":["const TChart = (\n() => {\n    let requestAnimationFrame = window.requestAnimationFrame\n        || window.mozRequestAnimationFrame\n        ||  window.webkitRequestAnimationFrame\n        || window.msRequestAnimationFrame,\n\n        cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n    let colorsMap = {\n        day: {\n            background: '#FFF',\n            XYAxisLabels: '#A1ACB3',\n            gridBottomBorder: '#cacccd',\n            gridLine: '#d4d6d7',\n            zoomOverlay: 'rgba(239,243,245,0.5)',\n            zoomCarriageTool: 'rgba(218,231,240,0.5)',\n            verticalInfoLine: '#CBCFD2',\n            pointsInfoBackground: '#FFF',\n            pointsInfoTitle: '#000',\n            legendItemBorder: '#EFF3F5',\n            legendItemName: '#000',\n        },\n        night: {\n            background: '#242F3E',\n            XYAxisLabels: '#546778',\n            gridBottomBorder: '#495564',\n            gridLine: '#303D4C',\n            zoomOverlay: 'rgba(27,36,48,0.5)',\n            zoomCarriageTool: 'rgba(81,101,120,0.5)',\n            verticalInfoLine: '#4e5a69',\n            pointsInfoBackground: '#253241',\n            pointsInfoTitle: '#FFF',\n            legendItemBorder: '#495564',\n            legendItemName: '#FFF',\n        }\n    };\n\n    /**\n     * @const {string}\n     */\n    let X_COLUMN_TYPE = 'x',\n        LINE_COLUMN_TYPE = 'line',\n        MONTH_NAMES = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n    let config = {\n        nightMode: false,\n        containerId: 'charts-container'\n    };\n\n    let rerender, fullrerender;\n\n    window.addEventListener('resize', function() {\n        fullrerender();\n    });\n\n    function generateId() {\n      return Math.random().toString(36).substr(2, 9);\n    }\n\n    function addEventListeners (el, events, listener, opts) {\n        let eventsList = events.split(' ');\n        for (let i = 0; i < eventsList.length; i++) {\n            el.addEventListener(eventsList[i], listener, opts)\n        }\n    }\n\n    function style (obj) {\n        return Object.entries(obj).reduce((styleString, [propName, propValue]) => {\n            propName = propName.replace(/([A-Z])/g, matches => `-${matches[0].toLowerCase()}`);\n            return `${styleString}${propName}:${propValue};`;\n        }, '')\n    }\n\n    class HTMLComponent {\n        NAME = null;\n        EVENTS = {\n            CREATED: 'created'\n        };\n\n        constructor() {\n            this._id = null;\n            this._events = [];\n            this.el = null;\n            this.rerender = null;\n            this.parent = null;\n        }\n\n        render(data) {\n            throw new Error()\n        }\n\n        rerender(newData) {\n            throw new Error()\n        }\n\n        on (event, handler, once) {\n            once = once || false;\n\n            if (!Object.values(this.EVENTS).includes(event)) {\n                throw new Error(`The event \"${event}\" is not supported`)\n            }\n            this._events.push({event, handler, once})\n        }\n\n        whenCreated(el, data) {}\n\n        whenCreate() {}\n\n        whenRendered(el, data) {}\n\n        create (parent, data, where) {\n            this.whenCreate();\n\n            let html = this._wrap(this.render(data));\n            if (parent instanceof HTMLComponent) {\n                this.parent = parent;\n                parent.on(this.EVENTS.CREATED, this._postCreate.bind(this, data));\n                return html\n\n            } else {\n                where = where || 'beforeEnd';\n                parent.insertAdjacentHTML(where, html);\n                this._postCreate(data)\n            }\n            return this.el\n        }\n\n        remove() {\n            if (this.el) {\n                this.el.remove();\n                this.el = null;\n            }\n        }\n\n        _postCreate (data) {\n            this.el = document.getElementById(this._id);\n\n            this.rerender = (newData) => {\n                data = newData || data;\n\n                let html = this.render(data);\n                this.el.innerHTML = html;\n                this._raiseEvent(this.EVENTS.CREATED, data);\n                this.whenRendered(this.el, data);\n                return html;\n            };\n\n            this._raiseEvent(this.EVENTS.CREATED, data);\n\n            let created = this.whenCreated(this.el, data);\n            if (created instanceof Promise) {\n                created.then(() => {\n                    this.whenRendered(this.el, data);\n                });\n            } else {\n                this.whenRendered(this.el, data);\n            }\n        };\n\n        _raiseEvent (eventName, data) {\n            this._events.forEach(({event, handler}) => {\n                if (event === eventName) {\n                    handler(data);\n                }\n            });\n            this._events = [];\n        }\n\n        _wrap (template) {\n            this._id = generateId();\n            return `<${this.NAME} id=\"${this._id}\">${template}</${this.NAME}>`\n        }\n    }\n\n    class CanvasHTMLComponent extends HTMLComponent {\n        NAME = 'canvas';\n\n        constructor() {\n            super();\n\n            this.ctx2d = null;\n        }\n\n        clear() {\n            this.ctx2d.clearRect(0, 0, this.el.width, this.el.height)\n        }\n\n        whenCreated (el) {\n            return new Promise((resolve) => {\n                setTimeout(() => {\n                    el.width = el.clientWidth;\n                    el.height = el.clientHeight;\n\n                    let dpr = window.devicePixelRatio || 1,\n                        canvasRect = el.getBoundingClientRect();\n\n                    el.width = canvasRect.width * dpr;\n                    el.height = canvasRect.height * dpr;\n\n                    this.ctx2d = el.getContext('2d');\n                    this.ctx2d.scale(dpr, dpr);\n\n                    resolve();\n                }, 0);\n            });\n        }\n\n        render() {\n            return ''\n        }\n    }\n\n    class XAxisLayerCanvasHTMLComponent  extends CanvasHTMLComponent {\n        whenCreated(el) {\n            return super.whenCreated(el).then(() => {\n                el.className = 'x-axis';\n            })\n        }\n\n        whenRendered(el, {chartData, opts}) {\n            this.clear();\n            this._renderXAxisDates(chartData, opts);\n        }\n\n        _renderXAxisDates (chartData, opts) {\n            this.ctx2d.font = '.7em' + ' ' + 'Arial';\n            this.ctx2d.fillStyle = getColor('XYAxisLabels');\n            this.ctx2d.textBaseline = 'bottom';\n\n            let labelOccupiedWidth = 0;\n            bypassXPoints(\n                this.el,\n                opts.drawingFrame,\n                chartData.xData,\n                chartData.minValX,\n                chartData.maxValX,\n                (v, x) => {\n                    let date = new Date(v),\n                        label = MONTH_NAMES[date.getMonth()] + ' ' + date.getDate(),\n                        labelWidth = this.ctx2d.measureText(label).width,\n                        labelMidWidth = labelWidth / 2,\n                        labelX = x - labelMidWidth,\n                        labelXEnd = x + labelMidWidth;\n\n                    if (labelOccupiedWidth <= labelX && x >= labelMidWidth && labelXEnd <= this.el.clientWidth) {\n                        labelOccupiedWidth = labelXEnd + 15; // + 15 minimal distance between labels\n\n                        this.ctx2d.fillText(label, labelX, this.el.clientHeight);\n                    }\n                }\n            );\n        }\n    }\n\n    class YAxisLayerCanvasHTMLComponent extends CanvasHTMLComponent {\n        constructor() {\n            super();\n\n            this._prevMaxY = null;\n            this._anim = new Animation(this._frameAnimHandler);\n        }\n\n        whenCreated(el) {\n            return super.whenCreated(el).then(() => {\n                el.className = 'y-axis';\n            });\n        }\n\n        whenRendered(el, {chartData, opts}) {\n            let increase = this._prevMaxY === void 0 || chartData.maxY > this._prevMaxY\n                ? true\n                : (chartData.maxY === this._prevMaxY ? undefined : false);\n\n            // TODO: 0\n            if (0 && increase === undefined) {\n                return;\n            }\n\n            this._anim.start(\n                {\n                    layer: this,\n                    anim: this._anim,\n                    ctx: this.ctx2d,\n                    xData: chartData.xData,\n                    minY: chartData.minY,\n                    stepValY: (chartData.maxY - chartData.minY) / opts.yAxis.grid.horizontalLines,\n                    stepHrzLine: (this.el.clientHeight - opts.drawingFrame.y + opts.drawingFrame.height) / opts.yAxis.grid.horizontalLines,\n                    maxShift: 40,\n                    chartData,\n                    opts,\n                    increase,\n                }, 1000\n\n            ).onFinished(() => {\n                this._prevMaxY = chartData.maxY;\n            });\n        }\n\n        _renderXYAxisLabels () {\n            for (let i = 0, initY, animY; i < this.opts.yAxis.grid.horizontalLines; i++) {\n                initY = (i + 1) * this.stepHrzLine - 1;\n\n                if (this.increase) {\n                    animY = initY + this.maxShift - this.anim.easeOutExpo(this.progress, 0, this.maxShift, this.duration);\n                    animY = (animY < initY) ? initY : animY;\n                } else {\n                    animY = this.anim.easeOutExpo(this.progress, initY - this.maxShift, this.maxShift, this.duration);\n                    animY = (animY > initY) ? initY : animY;\n                }\n\n                this.ctx.beginPath();\n                this.ctx.lineWidth = this.opts.yAxis.grid.lineWidth;\n                this.ctx.strokeStyle = i === this.opts.yAxis.grid.horizontalLines - 1\n                    ? getColor('gridBottomBorder')\n                    : getColor('gridLine');\n\n                this.ctx.moveTo(0, animY + this.opts.drawingFrame.y + 1);\n                this.ctx.lineTo(this.layer.el.clientWidth, animY + this.opts.drawingFrame.y + 1);\n                this.ctx.stroke();\n\n                this.ctx.textBaseline = 'top';\n                this.ctx.font = '.7em' + ' ' + 'Arial';\n                this.ctx.fillStyle = getColor('XYAxisLabels');\n                this.ctx.fillText(\n                    toHumanValue(this.minY + this.stepValY * (this.opts.yAxis.grid.horizontalLines - 1 - i)),\n                    0,\n                    animY - 15 + this.opts.drawingFrame.y\n                );\n            }\n        }\n\n        _frameAnimHandler () {\n            this.layer.clear();\n            this.layer._renderXYAxisLabels.call(this);\n        }\n    }\n\n    class PointsInfoHTMLComponent extends HTMLComponent {\n        NAME = 'points-info';\n        DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n        constructor() {\n            super();\n\n            this._values = []\n        }\n\n        whenCreate() {\n            this._values = [];\n        }\n\n        render ({x}) {\n            let date = new Date(x);\n            let weekDay = this.DAY_NAMES[date.getDay()];\n            let month = MONTH_NAMES[date.getMonth()];\n            let day = date.getDate();\n\n            return `\n                <div class=\"title\" style=\"color: ${getColor('pointsInfoTitle')}\">\n                   ${weekDay}, ${month} ${day}\n                </div>\n                <div class=\"values\">\n                    ${this._values.map(({yVal, lineName, color}) => `\n                        <div class=\"value\" style=\"color: ${color}\">\n                            <div>${toHumanValue(yVal)}</div>\n                            <div>${lineName}</div>\n                        </div>\n                    `).join('')}\n                </div>\n            `\n        }\n\n        onMouseOut () { }\n\n        whenCreated (el) {\n            el.style.backgroundColor = getColor('pointsInfoBackground');\n\n            this.el.addEventListener('mouseout', this.onMouseOut)\n        }\n\n        addVal ({yVal, lineName, color}) {\n            this._values.push({yVal, lineName, color});\n            this.rerender()\n        }\n\n        setPosition({left, right, top}) {\n            this.el.style.left = left;\n            this.el.style.right = right;\n            this.el.style.top = top;\n        }\n    }\n\n    class InfoLayerCanvasHTMLComponent extends CanvasHTMLComponent {\n        constructor() {\n            super();\n\n            this._chartData = null;\n            this._pointsInfo = new PointsInfoHTMLComponent();\n        }\n\n        whenCreated(el, {chartData, opts}) {\n            return super.whenCreated(el).then(() => {\n                el.className = 'info';\n                this._chartData = chartData;\n\n                el.addEventListener('mousemove', this._mouseMoveHandler.bind(this, opts));\n                el.addEventListener('mouseout', this._mouseOutHandler.bind(this));\n\n                this._pointsInfo.onMouseOut = (e) => {\n                    e.stopPropagation();\n\n                    if (e.relatedTarget && !parentElementsHierarchy(e.relatedTarget).includes(this._pointsInfo.el)) {\n                        this.clear();\n                        this._pointsInfo.remove();\n                    }\n                }\n            });\n        }\n\n        whenRendered(el, {chartData}) {\n            this._chartData = chartData;\n        }\n\n        clear() {\n            super.clear();\n            this._pointsInfo.remove();\n        }\n\n        _showInfo(chartData, opts, currXPos, points, lineIndex) {\n            for (let i = 0, leftPointMidDist, rightPointMidDist; i < points.length; i++) {\n                if (i > 0) {\n                    leftPointMidDist = (points[i][0] - points[i - 1][0]) * .5;\n                }\n                if (i < points.length - 1) {\n                    rightPointMidDist = (points[i + 1][0] - points[i][0]) * .5;\n                }\n\n                if (currXPos >= points[i][0] - leftPointMidDist && currXPos <= points[i][0] + rightPointMidDist) {\n                    if (this._firstPoint) {\n                        this._firstPoint = false;\n\n                        this.ctx2d.beginPath();\n                        this.ctx2d.lineWidth = 1;\n                        this.ctx2d.strokeStyle = getColor('verticalInfoLine');\n                        this.ctx2d.moveTo(points[i][0], 0);\n                        this.ctx2d.lineTo(points[i][0], this.el.clientHeight + opts.drawingFrame.height);\n                        this.ctx2d.stroke();\n\n                        if (this._pointsInfo.el) {\n                            // TODO: clear _values inside the component\n                            this._pointsInfo._values = [];\n                            this._pointsInfo.rerender({x: chartData.xData[i]})\n\n                        } else {\n                            this._pointsInfo.create(this.el.parentElement, {x: chartData.xData[i]});\n                        }\n                    }\n                    this._pointsInfo.addVal({\n                        yVal: chartData.yDatas[lineIndex][i],\n                        lineName: chartData.names[lineIndex],\n                        color: chartData.colors[lineIndex]\n                    });\n                    this._pointsInfo.setPosition({\n                        left: points[i][0] + 10 - this._pointsInfo.el.clientWidth * .5 + 'px',\n                        top: '10px'\n                    });\n\n                    this.ctx2d.beginPath();\n                    this.ctx2d.lineWidth = 2;\n                    this.ctx2d.strokeStyle = chartData.colors[lineIndex];\n                    this.ctx2d.fillStyle = getColor('background');\n                    this.ctx2d.arc(points[i][0], points[i][1], 4, 0, 2 * Math.PI);\n                    this.ctx2d.fill();\n                    this.ctx2d.stroke();\n                }\n            }\n        }\n\n        _mouseMoveHandler(opts, e) {\n            e.stopPropagation();\n\n            this.clear();\n\n            this._firstPoint = true;\n\n            drawPlot(\n                {\n                    x: opts.drawingFrame.x,\n                    y: opts.drawingFrame.y,\n                    width: this.el.clientWidth - opts.drawingFrame.x + opts.drawingFrame.width,\n                    height: this.el.clientHeight - opts.drawingFrame.y + opts.drawingFrame.height - 2\n                },\n                this._chartData,\n                this._showInfo.bind(this, this._chartData, opts, e.layerX)\n            );\n        }\n\n        _mouseOutHandler(e) {\n            e.stopPropagation();\n\n            if (e.relatedTarget && !parentElementsHierarchy(e.relatedTarget).includes(this._pointsInfo.el)) {\n                this.clear();\n            }\n        }\n    }\n\n    class PlotLayerCanvasHTMLComponent extends CanvasHTMLComponent {\n        constructor() {\n            super();\n\n            this.renderedChartData = [];\n            this._anim = new Animation(this._frameAnimHandler);\n        }\n\n        whenCreated(el) {\n            return super.whenCreated(el).then(() => {\n                el.className = 'plot';\n            })\n        }\n\n        whenRendered(el, {chartData, opts, animate}) {\n            this._anim.start(\n                {\n                    renderedChartData: this.renderedChartData,\n                    anim: this._anim,\n                    ctx: this.ctx2d,\n                    layer: this,\n                    chartData,\n                    opts,\n                    animate\n                },\n                800\n            );\n        }\n\n        _frameAnimHandler() {\n            this.layer.clear();\n\n            let lineWidth = 2;\n\n            drawPlot(\n                {\n                    x: this.opts.drawingFrame.x,\n                    y: this.opts.drawingFrame.y,\n                    width: this.layer.el.clientWidth - this.opts.drawingFrame.x + this.opts.drawingFrame.width,\n                    height: this.layer.el.clientHeight - this.opts.drawingFrame.y + this.opts.drawingFrame.height - lineWidth\n                },\n                this.chartData,\n                drawingPlotFunc.bind(this)\n            );\n\n            function drawingPlotFunc(points, lineIndex) {\n                this.ctx.beginPath();\n                this.ctx.lineWidth = lineWidth;\n                this.ctx.strokeStyle = this.chartData.colors[lineIndex];\n\n                for (let i = 0, x, y; i < points.length; i++) {\n                    x = points[i][0];\n                    y = points[i][1];\n\n                    let yr;\n                    if (this.animate) {\n                        let prevY = 0;\n                        if (this.renderedChartData[lineIndex] !== undefined) {\n                            if (this.renderedChartData[lineIndex][i] !== undefined) {\n                                prevY = this.renderedChartData[lineIndex][i];\n                            }\n                        }\n                        if (y < prevY) {\n                            yr = prevY - this.anim.easeOutExpo(this.progress, 0, prevY - y, this.duration);\n                        } else {\n                            yr = this.anim.easeOutExpo(this.progress, prevY, y - prevY, this.duration);\n                        }\n                    } else {\n                        yr = y\n                    }\n                    if (this.renderedChartData[lineIndex] === undefined) {\n                        this.renderedChartData[lineIndex] = [yr];\n                    } else {\n                        this.renderedChartData[lineIndex][i] = yr;\n                    }\n                    this.ctx.lineTo(x, yr)\n                }\n                this.ctx.stroke();\n            }\n        }\n    }\n\n    class ZoomCarriageHTMLComponent extends HTMLComponent {\n        NAME = 'zoom-carriage';\n\n        constructor() {\n            super();\n\n            this._currVisibilityFrame = null;\n            this._moveIsActive = false;\n            this._startStretchXPos = null;\n            this._initProps = {};\n            this._leftStretch = null;\n            this._rightStretch = null;\n            this._leftStretchIsActive = false;\n            this._rightStretchIsActive = false;\n        }\n\n        render() {\n            return `\n                <div class=\"left-stretch\"></div>\n                <div class=\"right-stretch\"></div>\n            `\n        }\n\n        get visibilityFrame() {\n            let from = this.el.offsetLeft / this.parent.el.clientWidth,\n                to = from + this.el.clientWidth / this.parent.el.clientWidth;\n            return [from, to];\n        }\n\n        whenVisibilityChanged(visibilityFrame) {}\n\n        whenCreated(el, {opts}) {\n            let color = getColor('zoomCarriageTool');\n\n            el.style.borderTopColor = color;\n            el.style.borderBottomColor = color;\n\n            this._leftStretch = el.getElementsByClassName('left-stretch')[0];\n            this._leftStretch.style.backgroundColor = color;\n\n            this._rightStretch = el.getElementsByClassName('right-stretch')[0];\n            this._rightStretch.style.backgroundColor = color;\n\n            addEventListeners(window, 'mousemove touchmove', this._windowMouseMoveHandler.bind(this));\n            addEventListeners(window, 'mouseup touchend', this._windowMouseUpHandler.bind(this));\n            addEventListeners(el, 'mousedown touchstart', this._mouseDownHandler.bind(this));\n            addEventListeners(this._leftStretch, 'mousedown touchstart', this._stretchMouseDownHandler.bind(this));\n            addEventListeners(this._rightStretch, 'mousedown touchstart', this._stretchMouseDownHandler.bind(this));\n\n            setTimeout(() => {\n                this.whenVisibilityChanged(this._currVisibilityFrame || this.visibilityFrame)\n            }, 0)\n        }\n\n        getRightShift() {\n            return (parseFloat(this.el.style.right) || 0);\n        }\n\n        _windowMouseMoveHandler(e) {\n            let x = e.screenX;\n            if (e instanceof TouchEvent) {\n                x = e.changedTouches[0].screenX\n            }\n            let dist = this._startStretchXPos - x;\n\n            if (this._moveIsActive) {\n                this._move(dist);\n                return\n            }\n            if (this._leftStretchIsActive) {\n                this._moveLeftStretch(dist);\n                return;\n            }\n            if (this._rightStretchIsActive) {\n                this._moveRightStretch(dist)\n            }\n        }\n\n        _windowMouseUpHandler() {\n            this._moveIsActive = false;\n            this._leftStretchIsActive = false;\n            this._rightStretchIsActive = false;\n        }\n\n        _mouseDownHandler(e) {\n            e.stopPropagation();\n\n            let x = e.screenX;\n            if (e instanceof TouchEvent) {\n                x = e.touches[0].screenX\n            }\n            this._moveIsActive = true;\n            this._startStretchXPos = x;\n            this._initProps.right = this.getRightShift();\n            this._initProps.width = this.el.clientWidth;\n        }\n\n        _stretchMouseDownHandler(e) {\n            e.stopPropagation();\n\n            let x = e.screenX;\n            if (e instanceof TouchEvent) {\n                x = e.touches[0].screenX\n            }\n            if (e.target === this._leftStretch) {\n                this._leftStretchIsActive = true;\n\n            } else if (e.target === this._rightStretch) {\n                this._rightStretchIsActive = true;\n            }\n            this._startStretchXPos = x;\n\n            this._initProps.right = this.getRightShift();\n            this._initProps.left = this.el.offsetLeft;\n            this._initProps.width = this.el.clientWidth;\n        }\n\n        _setProps({width, right}) {\n            if (width) {\n                this.el.style.width = width;\n            }\n            if (right) {\n                this.el.style.right = right;\n            }\n            this._currVisibilityFrame = this.visibilityFrame;\n\n            this.whenVisibilityChanged(this.visibilityFrame);\n        }\n\n        _move(dist) {\n            let newRight = this._initProps.right + dist;\n\n            if (newRight >= 0\n                && newRight <= this.parent.el.clientWidth - this._initProps.width\n            ) {\n                this._setProps({right: newRight + 'px'});\n            }\n        }\n\n        _moveLeftStretch(dist) {\n            let newWidth = this._initProps.width + dist;\n\n            if (newWidth >= 135\n                && newWidth <= this.parent.el.clientWidth - this._initProps.right\n            ) {\n                this._setProps({width: newWidth + 'px'});\n            }\n        }\n\n        _moveRightStretch(dist) {\n            let newRight = this._initProps.right + dist;\n\n            if (newRight >= 0\n                && this.parent.el.clientWidth - this._initProps.left - 135 >= newRight\n            ) {\n                let newWidth = this._initProps.width - dist;\n\n                this._setProps({\n                    right: newRight + 'px',\n                    width: newWidth + 'px'\n                });\n            }\n        }\n    }\n\n    class ZoomPlotCanvasHTMLComponent extends CanvasHTMLComponent{\n        whenRendered(el, {chartData, opts}) {\n            let lineWidth = 1;\n\n            this.clear();\n\n            drawPlot(\n                {\n                    x: 0,\n                    y: lineWidth,\n                    width: this.el.clientWidth,\n                    height: this.el.clientHeight - lineWidth\n                },\n                chartData,\n                (points, lineIndex) => {\n                    this.ctx2d.beginPath();\n                    this.ctx2d.lineWidth = lineWidth;\n                    this.ctx2d.strokeStyle = chartData.colors[lineIndex];\n\n                    for (let i = 0; i < points.length; i++) {\n                        this.ctx2d.lineTo(points[i][0], points[i][1])\n                    }\n                    this.ctx2d.stroke();\n                }\n            );\n        }\n    }\n\n    class ZoomHTMLComponent extends HTMLComponent {\n        NAME = 'zoom';\n\n        constructor() {\n            super();\n\n            this._plot = new ZoomPlotCanvasHTMLComponent();\n            this._overlay = new CanvasHTMLComponent();\n            this._zoomCarriage = new ZoomCarriageHTMLComponent();\n        }\n\n        render({chartData, opts}) {\n            this._zoomCarriage.whenVisibilityChanged = this._whenVisibilityChanged.bind(this);\n\n            return `\n                ${this._plot.create(this, {chartData, opts})}\n                ${this._overlay.create(this, {chartData, opts})}\n                ${this._zoomCarriage.create(this, {chartData, opts})}\n            `\n        }\n\n        get visibilityFrame() {\n            return this._zoomCarriage.visibilityFrame\n        }\n\n        whenVisibilityChanged(visibilityFrame) {}\n\n        _whenVisibilityChanged(visibilityFrame) {\n            this._renderOverlay();\n\n            this.whenVisibilityChanged(visibilityFrame);\n        }\n\n        _renderOverlay() {\n            this._overlay.clear();\n\n            this._overlay.ctx2d.fillStyle = getColor('zoomOverlay');\n            this._overlay.ctx2d.fillRect(0, 0, this._zoomCarriage.el.offsetLeft, this._overlay.el.clientHeight);\n\n            let zoomCarriageRightShift = this._zoomCarriage.getRightShift();\n            //console.log(this._overlay.el.clientWidth)\n\n            this._overlay.ctx2d.fillRect(\n                this._overlay.el.clientWidth - zoomCarriageRightShift,\n                0,\n                zoomCarriageRightShift,\n                this._overlay.el.clientHeight);\n        }\n    }\n\n    class LegendItemHTMLComponent extends HTMLComponent {\n        NAME = 'li';\n\n        constructor () {\n            super();\n\n            this._lineIndex = null;\n            this._visible = true;\n        }\n\n        render ({name, color, lineIndex}) {\n            this._lineIndex = lineIndex;\n\n            let styleObj = {\n                backgroundColor: color,\n                borderColor: color\n            };\n            if (!this._visible) {\n                styleObj.maskImage = 'unset';\n                styleObj.webkitMaskImage = 'unset';\n                styleObj.backgroundColor = 'none';\n            }\n            return `\n                <div class=\"state\" style=\"${style(styleObj)}\"></div>\n                <div class=\"name\" style=\"color: ${getColor('legendItemName')}\">${name}</div>\n            `\n        }\n\n        whenStateChanged (lineIndex, visible) { }\n\n        whenCreated (el) {\n            el.style.borderColor = getColor('legendItemBorder');\n\n            el.addEventListener('click', () => {\n                this._visible = !this._visible;\n                this.rerender();\n                this.whenStateChanged(this._lineIndex, this._visible)\n            })\n        }\n    }\n\n    class LegendHTMLComponent extends HTMLComponent {\n        NAME = 'ul';\n\n        constructor() {\n            super();\n\n            this._lines = [];\n        }\n\n        render({chartData, opts}) {\n            return `\n               ${this._lines.map(({name, color}, lineIndex) => {\n                   let legendItem =  new LegendItemHTMLComponent();\n                   legendItem.whenStateChanged = this.whenLegendItemStateChanged;\n                   return legendItem.create(this, {name, color, lineIndex})\n                }).join('')} \n            `\n        }\n\n        whenLegendItemStateChanged (lineIndex, visible) { }\n\n        whenCreated(el, {chartData}) {\n            el.className = 'legend';\n        }\n\n        addLine({name, color}) {\n            this._lines.push({name, color});\n            this.rerender()\n        }\n    }\n\n    class ChartHTMLComponent extends HTMLComponent {\n        NAME = 'chart';\n\n        constructor() {\n            super();\n\n            this._yAxisLayer = new YAxisLayerCanvasHTMLComponent();\n            this._xAxisLayer = new XAxisLayerCanvasHTMLComponent();\n            this._plotLayer = new PlotLayerCanvasHTMLComponent();\n            this._infoLayer = new InfoLayerCanvasHTMLComponent();\n\n            this._zoom = new ZoomHTMLComponent();\n            this._legend = new LegendHTMLComponent();\n        }\n\n        render({chartData, opts}) {\n            let currVisibilityFrame,\n                visibilityChangedTimer,\n                lastVisibleChartData = {minY: null, maxY: null};\n\n            this._zoom.whenVisibilityChanged = (visibilityFrame) => {\n                currVisibilityFrame = visibilityFrame;\n                this._infoLayer.clear();\n\n                this._render(chartData, opts, lastVisibleChartData, visibilityFrame, false);\n\n                if (visibilityChangedTimer) {\n                    clearTimeout(visibilityChangedTimer);\n                }\n                visibilityChangedTimer = setTimeout(() => {\n                    this._render(chartData, opts, lastVisibleChartData, visibilityFrame, true, true)\n                }, 100);\n            };\n\n            this._legend.whenLegendItemStateChanged = (lineIndex, visible) => {\n                chartData.yDatas[lineIndex].visible = visible;\n\n                this._zoom._plot.rerender({chartData, opts: opts.zoom});\n                this._render(chartData, opts, lastVisibleChartData, currVisibilityFrame, true, true)\n            };\n\n            return `\n                ${this._plotLayer.create(this, {chartData, opts})}\n                ${this._yAxisLayer.create(this, {chartData, opts})}\n                ${this._xAxisLayer.create(this, {chartData, opts})}\n                ${this._infoLayer.create(this, {chartData, opts})}\n                ${this._zoom.create(this, {chartData, opts: opts.zoom})}\n                ${this._legend.create(this, {chartData, opts})}\n            `\n        }\n\n        whenCreated(el, {chartData}) {\n            chartData.names.forEach((name, i) => {\n                this._legend.addLine({name, color: chartData.colors[i]})\n            });\n        }\n\n        _render (chartData, opts, lastVisibleChartData, visibilityFrame, recalculateMinMaxY=true, animate=false) {\n            let xl = chartData.xData.length,\n            visibleXData = chartData.xData.slice(xl * visibilityFrame[0], xl * visibilityFrame[1]),\n            minMaxValX = minMax(visibleXData);\n\n            let visibleChartData = {\n                xData: visibleXData,\n                yDatas: [],\n                minValX: minMaxValX[0],\n                maxValX: minMaxValX[1],\n                minY: null,\n                maxY: null,\n                colors: [],\n                names: chartData.names\n            };\n\n            for (let lineIndex = 0, visibleData, pointsYLen; lineIndex < chartData.yDatas.length; lineIndex++) {\n                if (chartData.yDatas[lineIndex].visible === false) {\n                    continue\n                }\n                visibleChartData.colors.push(chartData.colors[lineIndex]);\n\n                pointsYLen = chartData.yDatas[lineIndex].length;\n                visibleData = chartData.yDatas[lineIndex].slice(\n                    pointsYLen * visibilityFrame[0],\n                    pointsYLen * visibilityFrame[1]\n                );\n                visibleChartData.yDatas.push(visibleData);\n\n                if (recalculateMinMaxY) {\n                    let mm = minMax(visibleData);\n                    visibleChartData.minY = visibleChartData.minY === null\n                        ? mm[0]\n                        : Math.min(visibleChartData.minY, mm[0]);\n\n                    visibleChartData.maxY = visibleChartData.maxY === null\n                        ? mm[1]\n                        : Math.max(visibleChartData.maxY, mm[1]);\n                }\n            }\n\n            if (visibleChartData.minY == null) {\n                visibleChartData.minY = visibleChartData.minY || lastVisibleChartData.minY || chartData.minY;\n            }\n            if (visibleChartData.maxY == null) {\n                visibleChartData.maxY = visibleChartData.maxY || lastVisibleChartData.maxY || chartData.maxY;\n            }\n            lastVisibleChartData.minY = visibleChartData.minY;\n            lastVisibleChartData.maxY = visibleChartData.maxY;\n\n            this._yAxisLayer.rerender({chartData: visibleChartData, opts});\n            this._xAxisLayer.rerender({chartData: visibleChartData, opts});\n            this._plotLayer.rerender({chartData: visibleChartData, opts, animate});\n            this._infoLayer.rerender({chartData: visibleChartData, opts});\n        }\n    }\n\n    return {\n        configure: configure,\n        setData: setData,\n        switchMode: switchMode,\n        isNightMode: isNightMode,\n    };\n\n    function configure(val) {\n        config = Object.assign(config, val);\n    }\n\n    function setData(data) {\n        if (!Array.isArray(data)) {\n            throw new TypeError('Data for the TChart can be Array type only')\n        }\n        // to re-render the scene without the passing data always\n        rerender = render.bind(null, data);\n        fullrerender = rerender.bind(null, {\n            drawingFrame: {\n                x: 0,\n                y: 10,\n                width: 0,\n                height: -20\n            },\n            yAxis: {\n                text: {\n                    fontSize: '.7em',\n                    fontFamily: 'Arial'\n                },\n                grid: {\n                    horizontalLines: 5,\n                    lineWidth: .3\n                }\n            }\n        });\n        fullrerender();\n    }\n\n    function switchMode() {\n        config.nightMode = !config.nightMode;\n        fullrerender();\n    }\n\n    function isNightMode() {\n        return config.nightMode;\n    }\n\n    function getColor(name) {\n        return config.nightMode ? colorsMap.night[name] : colorsMap.day[name]\n    }\n\n    function prepareChartData(chartData) {\n        let xData, yDatas = [], minMaxXData, minY, maxY, colors = [], names = [];\n\n        for (let columnIndex = 0; columnIndex < chartData.columns.length; columnIndex++) {\n            let columnData = chartData.columns[columnIndex];\n\n            if (!Array.isArray(columnData)) {\n                throw new TypeError('Column data can be only Array type')\n            }\n            if (!columnData.length) {\n                throw new Error('Column data cannot be empty')\n            }\n            let columnName = columnData[0],\n                columnType = chartData.types[columnName];\n\n            if (!columnType) {\n                throw new TypeError('Column type for a column by ref\"' + columnName + '\" was not defined')\n            }\n            if (![LINE_COLUMN_TYPE, X_COLUMN_TYPE].includes(columnType)) {\n                throw new Error('Column type \"' + columnType + '\" does not supported')\n            }\n            if (columnType === X_COLUMN_TYPE) {\n                if (xData) {\n                    throw new Error('Column type \"X\" can be only one')\n                }\n                xData = columnData.slice(1); // remove column type from data\n                minMaxXData = minMax(xData);\n\n            } else {\n                let yData = columnData.slice(1); // remove column type from data\n                let minMaxYData = minMax(yData);\n                minY = minY === undefined ? minMaxYData[0]: Math.min(minY, minMaxYData[0]);\n                maxY = maxY === undefined ? minMaxYData[1]: Math.max(maxY, minMaxYData[1]);\n\n                yDatas.push(yData);\n                // meta\n                colors.push(chartData.colors[columnName]);\n                names.push(chartData.names[columnName]);\n            }\n        }\n\n        return {\n            xData: xData,\n            yDatas: yDatas,\n            names: names,\n            colors: colors,\n            minValX: minMaxXData[0],\n            maxValX: minMaxXData[1],\n            minY: minY,\n            maxY: maxY\n        }\n    }\n\n    function render(data, opts) {\n        let chartsContainer = document.getElementById(config.containerId);\n        if (!chartsContainer) {\n            throw new Error('Charts container by ID \"' + config.containerId + '\" was not found');\n        }\n        document.body.className = config.nightMode ? 'night-mode' : '';\n        chartsContainer.innerHTML = '';\n\n        for (let i = 0; i < data.length; i++) {\n            (new ChartHTMLComponent()).create(\n                chartsContainer,\n                {chartData: prepareChartData(data[i]), opts});\n        }\n    }\n\n    /**\n     * @param {Object} canvas - Canvas HTML element\n     * @param {Object} drawingFrame\n     * @param {Array} data\n     * @param {Number} minValX\n     * @param {Number} maxValX\n     * @param {function} callback\n     */\n    function bypassXPoints(canvas, drawingFrame, data, minValX, maxValX, callback) {\n        let width = canvas.clientWidth - drawingFrame.x + drawingFrame.width,\n            compressionRatioX = width / (maxValX - minValX);\n\n        for (let i = 0; i < data.length; i++) {\n            let x = drawingFrame.x + (data[i] - minValX) * compressionRatioX;\n            callback(data[i], x)\n        }\n    }\n\n    /**\n     * Draw the plot in the specific area somewhere you want\n     * @param {{x: number, y: number, width: number, height: number}} areaMetric -\n     * @param {Object} chartData\n     * @param {function} drawingFunc\n     */\n    function drawPlot(areaMetric, chartData, drawingFunc) {\n        let compressionRatioX = areaMetric.width / (chartData.maxValX - chartData.minValX),\n            compressionRatioY = areaMetric.height / (chartData.maxY - chartData.minY);\n\n        for (let lineIndex = 0, points; lineIndex < chartData.yDatas.length; lineIndex++) {\n            if (chartData.yDatas[lineIndex].visible === false) {\n                continue\n            }\n            points = [];\n            for (let yIndex = 0; yIndex < chartData.yDatas[lineIndex].length; yIndex++) {\n                points.push([\n                    areaMetric.x + (chartData.xData[yIndex] - chartData.minValX) * compressionRatioX,\n                    // areaMetric.height - inversion by Y\n                    areaMetric.y + areaMetric.height - (\n                        chartData.yDatas[lineIndex][yIndex] - chartData.minY\n                    ) * compressionRatioY\n                ])\n            }\n            drawingFunc(points, lineIndex);\n        }\n    }\n\n    function Animation(frameHandler) {\n        let reqAnimId, onFinishedCallback = function() { };\n\n        return {\n            start: start,\n            easeOutExpo: easeOutExpo,\n            onFinished: onFinished\n        };\n\n        function onFinished(callback) {\n            onFinishedCallback = callback\n        }\n\n        function start(context, duration) {\n            context = context || {};\n\n            let startAnimTime;\n\n            if (reqAnimId) {\n                cancelAnimationFrame(reqAnimId);\n            }\n            reqAnimId = requestAnimationFrame(frame);\n            return this;\n\n            function frame(timestamp) {\n                if (!startAnimTime) {\n                    startAnimTime = timestamp;\n                }\n                context.progress = timestamp - startAnimTime;\n                context.duration = duration;\n\n                frameHandler.call(context);\n\n                if (context.progress < duration) {\n                    reqAnimId = requestAnimationFrame(frame)\n                } else {\n                    reqAnimId = null;\n                    onFinishedCallback();\n                }\n            }\n        }\n\n        function easeOutExpo (t, b, c, d) {\n            return c * (-Math.pow(2, -10 * t / d) + 1) * 1024 / 1023 + b;\n        }\n    }\n\n    function minMax(data) {\n        let min, max;\n\n        for (let i = 0; i < data.length; i++) {\n            if (min === undefined || min > data[i]) {\n                min = data[i]\n            }\n            if (max === undefined || max < data[i]) {\n                max = data[i]\n            }\n        }\n        return [min, max];\n    }\n\n    function toHumanValue(v) {\n        if (v >= 1000000000) {\n            return (v / 1000000000).toFixed(2) + 'G';\n\n        } else if (v >= 1000000) {\n            return (v / 1000000).toFixed(2) + 'M';\n\n        } else if (v >= 1000) {\n            return (v / 1000).toFixed(2) + 'K';\n        }\n        return v > 0 ? v.toFixed(2) : v;\n    }\n\n    function parentElementsHierarchy(e, parents = []) {\n        parents.push(e);\n\n        if (e.parentElement) {\n            parentElementsHierarchy(e.parentElement, parents)\n        }\n        return parents\n    }\n})();\n"],"file":"tchart.js"}